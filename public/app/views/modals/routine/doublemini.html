<form class="form-horizontal" role="form" name="routineForm" ng-submit="save(routineForm.$valid && allSkillsValid())" novalidate>
    <div class="modal-header">
        <h3>{{ routine.name || title }}</h3>
    </div>
    <div class="modal-body">
        
        <div ng-if="error" class="alert alert-danger"><strong>Error!</strong> {{ error }}</div>
        
        <div class="form-group" ng-class="{'has-error' : routineForm.name.$invalid && !routineForm.name.$pristine }">
            <label for="name" class="col-sm-4 control-label">
                <i ng-show="routine.name" class="fa fa-check-circle-o status-valid"></i>
                <i ng-show=" ! routine.name" class="fa fa-times-circle-o status-invalid"></i>
                <span>Pass name</span>
            </label>
            <div class="col-sm-8">
                <input type="text" id="name" name="name" class="form-control" ng-model="routine.name" placeholder="Name this pass..." required>
                
                <p ng-show="routineForm.name.$invalid && !routineForm.name.$pristine" class="help-block">Pass name is required.</p>
            </div>
        </div>
        
        <div ng-show=" ! skill['spotter']" class="form-group" ng-class="{'has-error' : routineForm.formSkill['mounter'].$invalid && !routineForm.formSkill['mounter'].$pristine }">
            
            <!-- Mounter -->
            <label class="col-sm-4 control-label">
                <i ng-show="form.loading['mounter']" class="fa fa-spinner fa-spin"></i>
                <i ng-show="form.valid['mounter']" class="fa fa-check-circle-o status-valid"></i>
                <i ng-show=" ! form.valid['mounter']" class="fa fa-times-circle-o status-invalid"></i>
                <span>Mounter</span>
            </label>

            <div class="col-sm-8">
                <input
                    type="text"
                    name="formSkill['mounter']"
                    ng-change="checkValid('mounter')"
                    ng-model="skill['mounter']"
                    typeahead="possibleSkills.fig as possibleSkill for possibleSkills in searchSkills($viewValue, 'mounter')"
                    typeahead-loading="form.loading['mounter']"
                    typeahead-template-url="/app/views/typeahead/skill.html"
                    typeahead-on-select="skillSelected($item, $model, 'mounter')"
                    placeholder="FIG code or skill name..."
                    class="form-control"
                >
            </div>
        
        </div>
        <div ng-show=" ! skill['mounter']" class="form-group" ng-class="{'has-error' : routineForm.formSkill['spotter'].$invalid && !routineForm.formSkill['spotter'].$pristine }">
            
            <!-- Spotter -->
            <label class="col-sm-4 control-label">
                <i ng-show="form.loading['spotter']" class="fa fa-spinner fa-spin"></i>
                <i ng-show="form.valid['spotter']" class="fa fa-check-circle-o status-valid"></i>
                <i ng-show=" ! form.valid['spotter']" class="fa fa-times-circle-o status-invalid"></i>
                <span>Spotter</span>
            </label>

            <div class="col-sm-8">
                <input
                    type="text"
                    name="formSkill['spotter']"
                    ng-change="checkValid('spotter')"
                    ng-model="skill['spotter']"
                    typeahead="possibleSkills.fig as possibleSkill for possibleSkills in searchSkills($viewValue, 'spotter')"
                    typeahead-loading="form.loading['spotter']"
                    typeahead-template-url="/app/views/typeahead/skill.html"
                    typeahead-on-select="skillSelected($item, $model, 'spotter')"
                    placeholder="FIG code or skill name..."
                    class="form-control"
                >
            </div>

        </div>
        <div class="form-group" ng-class="{'has-error' : routineForm.formSkill['dismount'].$invalid && !routineForm.formSkill['dismount'].$pristine }">

            <!-- Dismount -->
            <label class="col-sm-4 control-label">
                <i ng-show="form.loading['dismount']" class="fa fa-spinner fa-spin"></i>
                <i ng-show="form.valid['dismount']" class="fa fa-check-circle-o status-valid"></i>
                <i ng-show=" ! form.valid['dismount']" class="fa fa-times-circle-o status-invalid"></i>
                <span>Dismount</span>
            </label>

            <div class="col-sm-8">
                <input
                    type="text"
                    name="formSkill['dismount']"
                    ng-change="checkValid('dismount')"
                    ng-model="skill['dismount']"
                    typeahead="possibleSkills.fig as possibleSkill for possibleSkills in searchSkills($viewValue, 'dismount')"
                    typeahead-loading="form.loading['dismount']"
                    typeahead-template-url="/app/views/typeahead/skill.html"
                    typeahead-on-select="skillSelected($item, $model, 'dismount')"
                    placeholder="FIG code or skill name..."
                    class="form-control"
                >
            </div>
        </div>

        <div class="form-group" ng-class="{'has-error' : routineForm.description.$invalid && !routineForm.description.$pristine }">
            <label for="description" class="col-sm-4 control-label">Description</label>
            <div class="col-sm-8">
                <textarea id="description" name="description" class="form-control" ng-model="routine.description"></textarea>
            </div>
        </div>

    </div>
    <div class="modal-footer">
        <input type="submit" class="btn btn-primary" ng-disabled="routineForm.$invalid || ! allSkillsValid()" value="Save">
        <input type="button" class="btn btn-default" ng-click="cancel()" value="Cancel">
    </div>
</form>